<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/mypage.css">
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-straight/css/uicons-regular-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
        <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-straight/css/uicons-solid-straight.css'>

</head>
<body>
    <header>
        <h1>D.O.</h1>
    </header>
    <div id="layout">
        <nav>
            <div>
                <ul>
                    <a href="main.html" style="text-decoration: none; color: black;"><li><i class="fi fi-rs-home"></i>홈</li></a>
                    <a href="mission.html" style="text-decoration: none; color: black;"><li><i class="fi fi-rr-book-bookmark"></i></i>미션</li></a>
                    <li id="this"><i class="fi fi-rr-user"></i>마이페이지</li>
                </ul>
            </div>
            <div id="profile">
                <div>
                    <span>대소마고</span>
                    <small>@daegusomago2025</small>
                </div>
                <button id="logout">로그아웃</button>
            </div>
        </nav>
        <main>
            <div class="content-wr">
                <div class="profile-content" style="position: relative;">
                    <img src="../image/profile-img.png" style="width: 50px; height: 50px; border-radius: 50%; float: left;">
                    <div style="width: 30%; height: 100%; display: flex; flex-direction: column; margin: 10px; margin-left: 60px;">
                        <h4 style="display: inline-block;">대소마고</h4>
                        <p style="color: #A9A9A9; display: inline-block;">@daegusomago2025</p>    
                    </div>
                    <span style="font-size: 10px; bottom: 20px; right: 30px; position: absolute;">로그아웃</span>
                </div>

                <div class="main-wr" style="display: flex; gap: 30px; justify-content: space-between;">
                    <div class="main mainbox-left" style="width: 40%;">
                        <div class="mainbox-left_top br-20" style="padding: 8px; padding-left: 40px;">
                            <h3>지난 미션목록</h3>
                        </div>
                        <div class="mainbox-left_bottom br-20" style="border: none;">
                            <div class="container mt-5">
                                <ul class="list">
                                <li class="tab-button">맞춤 미션</li>
                                <li class="tab-button orange">만든 미션</li>
                                </ul>
                                <div class="tab-content-wr br-20" style="border-radius: 0 0 20px 20px ; border-top: 0px ;">
                                    <div class="tab-content">
                                    <p>test</p>
                                    </div>
                                    <div class="tab-content show">
                                    <p>test2</p>
                                    </div>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="main mainbox-right br-20">
                        <div class="mainbox-right-" style="height: 350px;">
                            <div class="title-box">
                                <h5>진행중인 뱃지</h5>
                            </div>
                            <div style="width: 100%; height: 280px; display: flex; gap: 10px; justify-content: space-between; padding: 25px;">
                                
                                <div class="b-box">
                                    <div style="width: 80px; height: 80px; background-color: white;  margin: auto; margin-top: 20px; border-radius: 50%;">
                                        <img src="../image/2.png" class="c">

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;" class="API-name">이름</h5>
                                    <div style="display: flex;">
                                        <div style="margin-top: 10px;height: 7px; position: relative; width: 80%; background-color: #FFC6C6; border-radius: 20px;">
                                            <div class="progress" ></div>                                       
                                        </div>
                                        <span style="font-size: 8px; color: #F46666; float: right; margin-top: 10px; margin-left: 2px;">90%</span>
                                    </div>
                                    <div>
                                        <p class="si">설명</p>
                                    </div>
                                </div>
                                <div class="b-box">
                                    <div style="width: 80px; height: 80px; background-color: white;  margin: auto; margin-top: 20px; border-radius: 50%;">
                                        <img src="../image/4.png" class="c">

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;" class="API-name">이름</h5>
                                    <div style="display: flex;">
                                        <div style="margin-top: 10px;height: 7px; position: relative; width: 80%; background-color: #FFC6C6; border-radius: 20px;">
                                            <div class="progress" ></div>                                       
                                        </div>
                                        <span style="font-size: 8px; color: #F46666; float: right; margin-top: 10px; margin-left: 2px;">90%</span>
                                    </div>
                                    <div>
                                        <p class="si">설명</p>
                                    </div>
                                </div>
                                <div class="b-box">
                                    <div style="width: 80px; height: 80px; background-color: white;  margin: auto; margin-top: 20px; border-radius: 50%;">
                                        <img src="../image/5.png" class="c">

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;" class="API-name">이름</h5>
                                    <div style="display: flex;">
                                        <div style="margin-top: 10px;height: 7px; position: relative; width: 80%; background-color: #FFC6C6; border-radius: 20px;">
                                            <div class="progress" ></div>                                       
                                        </div>
                                        <span style="font-size: 8px; color: #F46666; float: right; margin-top: 10px; margin-left: 2px;">90%</span>
                                    </div>
                                    <div>
                                        <p class="si">설명</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mainbox-right-" style="border-top: solid 1px #E6D0D0; height: 350px;">
                            <div class="title-box">
                                <h5>총 뱃지</h5>
                            </div>
                            <div class="tkffuwnj">
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/1.png" class="c2">
                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>
                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/2.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>
                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/3.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>
                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/4.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>

                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/5.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>

                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/6.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>

                                </div>
                                <div class="seven-box">
                                    <div class="o-seven-box">
                                    <img src="../image/7.png" class="c2">
                                        <div style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.3); border-radius: 50%; position: absolute; top:0px"></div>

                                    </div>
                                    <h5 style="display: block;font-weight: bold; margin-top: 10px; text-align: center;">꾸준한 도전자</h5>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
          const token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJkb0BkZ3N3LmhzLmtyIiwiaWF0IjoxNzU0MTYzNjUyLCJleHAiOjE3NTQxNjcyNTIsInN1YiI6IjEiLCJwdXJwb3NlIjoiYWNjZXNzIn0.yqaGtDMEAJsJRihC-DA6ar-5jw0-a1tARzxpFuk_5nQ";
        
          // ✅ API 호출
          fetch("http://10.10.6.55:8080/missions/completed", {
            method: "GET",
            headers: {
              "Authorization": "Bearer " + token
            }
          })
            .then(response => {
              if (!response.ok) throw new Error("서버 응답 오류");
              return response.json();
            })
            .then(data => {
              console.log("받은 데이터:", data);
              const missions = data.data;
              const tabContents = document.querySelectorAll(".tab-content");
        
              // 탭 내용 초기화
              tabContents.forEach(tc => tc.innerHTML = "");
        
              // 데이터를 탭에 나눠서 삽입
              missions.forEach(mission => {
                const p = document.createElement("p");
                p.textContent = mission.content;
        
                // isPrivate false → 맞춤 미션 (0번 탭), true → 만든 미션 (1번 탭)
                if (mission.isPrivate === false) {
                  tabContents[0]?.appendChild(p);
                } else {
                  tabContents[1]?.appendChild(p);
                }
              });
            })
            .catch(err => {
              console.error("API 호출 실패:", err);
            });
        
          // ✅ 탭 전환 이벤트 설정
          const tabButtons = document.querySelectorAll('.tab-button');
          const tabContents = document.querySelectorAll('.tab-content');
        
          tabButtons.forEach((btn, index) => {
            btn.addEventListener('click', () => {
              // 모든 버튼에서 'orange' 제거
              tabButtons.forEach(b => b.classList.remove('orange'));
        
              // 클릭한 버튼에 'orange' 추가
              btn.classList.add('orange');
        
              // 모든 탭에서 'show' 제거
              tabContents.forEach(content => content.classList.remove('show'));
        
              // 해당 탭에만 'show' 추가
              tabContents[index].classList.add('show');
            });
          });
        });
        </script>
        
</body>
</html>